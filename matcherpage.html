<!DOCTYPE html>
<html>
  <head>
  </head>

  <body>

    <h1>Connection Finder</h1>
    <input type="text" id="userInput"><br><br>
    <button id="submit">Find Match</button>

    <p id="response"></p>

    <script type="module">

      const submitInformation = document.getElementById("submit");
      const responseParagraph = document.getElementById("response");

      submitInformation.addEventListener('click', async () => {

        const userTags = document.getElementById("userInput").value.trim();

        if (!userTags) {
          responseParagraph.textContent = "Please enter some text before submitting.";
          return; 
        }

        console.log("hello");
        try {
          const apiKey = "AIzaSyDQQ-ohHyG1192SEAu4xtZTpqQ3d9qDORE";
          const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

          const requestBody = {
            contents: [
              {
                parts: [
                  {
                    text: userTags
                  }
                ]
              }
            ]
          };

          const response = await fetch(apiUrl, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(requestBody)
          });

          const result = await response.json();
          console.log(result);

          if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts && result.candidates[0].content.parts.length > 0) {
            responseParagraph.textContent = result.candidates[0].content.parts[0].text;
          } else {
            responseParagraph.textContent = "No content generated or an unexpected response format.";
          }
          
        } catch (error) {
          console.error("Error calling Gemini AI: ", error);
          responseParagraph.textContent = "An error occurred while connecting to Gemini AI. Check the console for more details.";
        }
      });
    </script>
  </body>
</html>